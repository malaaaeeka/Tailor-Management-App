<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About - XYZ SHOP</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        /* Navigation Bar */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 15px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            z-index: 1000;
            transition: all 0.3s ease;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: #6366f1;
            white-space: nowrap;
            transition: color 0.3s ease;
        }

        .logo:hover {
            color: #4338ca;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-links a {
            color: #6366f1;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            transition: color 0.3s ease;
            padding: 8px 16px;
            border-radius: 6px;
            white-space: nowrap;
        }

        .nav-links a:hover {
            color: #4338ca;
        }

        .nav-links a.active {
            background: rgba(99, 102, 241, 0.1);
            color: #4338ca;
        }

        .menu-toggle {
            display: none;
            flex-direction: column;
            cursor: pointer;
            padding: 4px;
        }

        .menu-toggle span {
            width: 25px;
            height: 3px;
            background-color: #6366f1;
            margin: 3px 0;
            transition: all 0.3s ease;
            border-radius: 2px;
        }

        /* Main Content */
        .main-container {
            padding-top: 80px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-left: 2rem;
            padding-right: 2rem;
        }

        /* Hero Section */
        .hero-section {
            background: white;
            border-radius: 12px;
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.15);
            padding: 4rem 3rem;
            margin: 2rem 0;
            text-align: center;
            max-width: 900px;
            width: 100%;
        }

        .hero-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #6366f1;
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .hero-subtitle {
            font-size: 1.1rem;
            color: #6b7280;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto 2rem;
        }

        .hero-divider {
            width: 80px;
            height: 4px;
            background: linear-gradient(135deg, #6366f1 0%, #764ba2 100%);
            margin: 0 auto;
            border-radius: 2px;
        }

        /* Content Grid */
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            width: 100%;
            margin: 2rem 0;
        }

        .content-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 2.5rem 2rem;
            text-align: center;
            transition: box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .content-card:hover {
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        }

        .card-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 1rem;
        }

        .card-text {
            color: #6b7280;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        /* Stats Section */
        .stats-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            max-width: 900px;
            width: 100%;
            margin: 2rem 0 4rem;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 2rem 1.5rem;
            text-align: center;
            transition: box-shadow 0.3s ease;
            border: 2px solid transparent;
        }

        .stat-card:hover {
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            color: #6366f1;
            display: block;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: #6b7280;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 0.85rem;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .hero-section {
                padding: 3rem 2rem;
            }

            .hero-title {
                font-size: 2rem;
            }
        }

        @media (max-width: 768px) {
            .navbar {
                padding: 15px 20px;
                flex-wrap: wrap;
            }

            .menu-toggle {
                display: flex;
                order: 3;
            }

            .logo {
                order: 1;
                font-size: 1.3rem;
            }

            .nav-links {
                order: 2;
                width: 100%;
                flex-direction: column;
                background: white;
                position: absolute;
                top: 100%;
                left: 0;
                padding: 1rem;
                gap: 0.5rem;
                transform: translateY(-100%);
                opacity: 0;
                pointer-events: none;
                transition: all 0.3s ease;
                border-top: 1px solid rgba(0, 0, 0, 0.1);
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            }

            .nav-links.active {
                transform: translateY(0);
                opacity: 1;
                pointer-events: all;
            }

            .nav-links a {
                padding: 1rem;
                width: 100%;
                text-align: center;
                border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            }

            .nav-links a:last-child {
                border-bottom: none;
            }

            .main-container {
                padding-left: 1rem;
                padding-right: 1rem;
            }

            .hero-section {
                padding: 2.5rem 1.5rem;
            }

            .content-card {
                padding: 2rem 1.5rem;
            }

            .hero-title {
                font-size: 1.8rem;
                letter-spacing: 1px;
            }

            .hero-subtitle {
                font-size: 1rem;
            }

            .content-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .stats-section {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }

            .stat-card {
                padding: 1.5rem 1rem;
            }

            .stat-number {
                font-size: 2rem;
            }
        }

        /* Animation for cards */
        .content-card,
        .stat-card {
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 0.6s ease forwards;
        }

        .content-card:nth-child(1) { animation-delay: 0.1s; }
        .content-card:nth-child(2) { animation-delay: 0.2s; }
        .content-card:nth-child(3) { animation-delay: 0.3s; }

        .stat-card:nth-child(1) { animation-delay: 0.1s; }
        .stat-card:nth-child(2) { animation-delay: 0.2s; }
        .stat-card:nth-child(3) { animation-delay: 0.3s; }
        .stat-card:nth-child(4) { animation-delay: 0.4s; }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Hero section animation */
        .hero-section {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s ease 0.2s forwards;
        }
    </style>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="logo">XYZ SHOP</div>
        <ul class="nav-links" id="navLinks">
            <li><a href="#" id="homeLink">Home</a></li>
            <li><a href="about.html" class="active">About</a></li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
        <div class="menu-toggle" id="menuToggle">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>

    <div class="main-container">
        <!-- Hero Section -->
        <section class="hero-section">
            <h1 class="hero-title">About XYZ Shop</h1>
            <p class="hero-subtitle">
                Crafting excellence in every thread, creating fashion that tells your unique story with uncompromising quality and timeless style. At XYZ SHOP, we believe that clothing is more than just fabric – it's an expression of identity, confidence, and artistry. Our mission is to provide exceptional fashion pieces that empower our customers to feel confident, stylish, and authentically themselves. We are committed to sustainable practices, ethical manufacturing, and creating lasting relationships with our community through exceptional service and unparalleled quality.
            </p>
            <div class="hero-divider"></div>
        </section>

        <!-- Content Cards -->
        <div class="content-grid">
            <div class="content-card">
                <h3 class="card-title">Our Craftsmanship</h3>
                <p class="card-text">
                    Every piece is meticulously crafted by skilled artisans who understand that true luxury lies in the details. We combine traditional techniques with modern innovation to create garments that stand the test of time.
                </p>
            </div>

            <div class="content-card">
                <h3 class="card-title">Premium Materials</h3>
                <p class="card-text">
                    We source only the finest fabrics and materials from trusted suppliers worldwide. Each thread, button, and accessory is carefully selected to ensure the highest quality and comfort for our discerning customers.
                </p>
            </div>

            <div class="content-card">
                <h3 class="card-title">Personalized Style</h3>
                <p class="card-text">
                    Your style is unique, and so are our creations. We offer personalized consultations and custom tailoring services to ensure every piece fits perfectly and reflects your individual personality and preferences.
                </p>
            </div>
        </div>

        <!-- Stats Section -->
        <div class="stats-section">
            <div class="stat-card">
                <span class="stat-number">15+</span>
                <span class="stat-label">Years of Excellence</span>
            </div>

            <div class="stat-card">
                <span class="stat-number">10K+</span>
                <span class="stat-label">Happy Customers</span>
            </div>

            <div class="stat-card">
                <span class="stat-number">500+</span>
                <span class="stat-label">Unique Designs</span>
            </div>

            <div class="stat-card">
                <span class="stat-number">99%</span>
                <span class="stat-label">Satisfaction Rate</span>
            </div>
        </div>
    </div>

    <script>
        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "REACT_APP_FIREBASE_API_KEY",
          authDomain: "REACT_APP_FIREBASE_AUTH_DOMAIN",
          projectId: "REACT_APP_FIREBASE_PROJECT_ID",
          storageBucket: "REACT_APP_FIREBASE_STORAGE_BUCKET",
          messagingSenderId: "REACT_APP_FIREBASE_MESSAGING_SENDER_ID",
          appId: "REACT_APP_FIREBASE_APP_ID"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Store user role globally
        let userRole = null;
        let userDashboardUrl = '/login';

        // Function to check user role and store it
        async function checkUserRole(user) {
            if (!user) {
                userRole = null;
                userDashboardUrl = '/login';
                return null;
            }

            try {
                console.log('Checking role for user:', user.email);
                
                // Check if user is a tailor
                const tailorDoc = await db.collection('tailors').doc(user.uid).get();
                if (tailorDoc.exists) {
                    console.log('User is a tailor');
                    userRole = 'tailor';
                    userDashboardUrl = '/tailor-dashboard'; // Correct React route
                    return 'tailor';
                }
                
                // Check if user is a customer
                const customerDoc = await db.collection('customers').doc(user.uid).get();
                if (customerDoc.exists) {
                    console.log('User is a customer');
                    userRole = 'customer';
                    userDashboardUrl = '/customer-dashboard'; // Correct React route
                    return 'customer';
                }
                
                console.log('User found but no role assigned');
                userRole = null;
                userDashboardUrl = '/login';
                return null;
                
            } catch (error) {
                console.error('Error checking user role:', error);
                userRole = null;
                userDashboardUrl = '/login';
                return null;
            }
        }

        // Function to handle home link click
        function handleHomeClick(event) {
            event.preventDefault();
            
            console.log('Home link clicked, current userRole:', userRole);
            
            // Check if we have cached user role
            if (userRole === 'tailor') {
                console.log('Redirecting to tailor dashboard');
                window.location.href = '/tailor-dashboard';
            } else if (userRole === 'customer') {
                console.log('Redirecting to customer dashboard');
                window.location.href = '/customer-dashboard';
            } else {
                // If no cached role, check current auth state
                const currentUser = auth.currentUser;
                if (currentUser) {
                    console.log('User logged in but role not cached, checking role...');
                    // User is logged in but role not cached, check role first
                    checkUserRole(currentUser).then(() => {
                        console.log('Role checked, redirecting to:', userDashboardUrl);
                        window.location.href = userDashboardUrl;
                    }).catch(error => {
                        console.error('Error checking role:', error);
                        // Fallback to login if there's an error
                        window.location.href = '/login';
                    });
                } else {
                    console.log('No user logged in, redirecting to login');
                    // No user logged in, go to login
                    window.location.href = '/login';
                }
            }
        }

        // Enhanced function to update home link with better error handling
        function updateHomeLink() {
            const homeLink = document.getElementById('homeLink');
            
            if (!homeLink) {
                console.error('Home link element not found');
                return;
            }
            
            // Always keep the text as "Home"
            homeLink.textContent = 'Home';
            
            // Remove any existing click listeners
            homeLink.removeEventListener('click', handleHomeClick);
            
            // Add click listener
            homeLink.addEventListener('click', handleHomeClick);
            
            // Listen for auth state changes
            auth.onAuthStateChanged(async (user) => {
                try {
                    if (user) {
                        console.log('User logged in:', user.email);
                        // Check and cache user role
                        await checkUserRole(user);
                        console.log('User role set to:', userRole);
                        console.log('Dashboard URL set to:', userDashboardUrl);
                    } else {
                        console.log('No user logged in');
                        userRole = null;
                        userDashboardUrl = '/login';
                    }
                    
                    // Always keep the text as "Home" regardless of auth state
                    homeLink.textContent = 'Home';
                } catch (error) {
                    console.error('Error in auth state change handler:', error);
                    // Reset to safe defaults
                    userRole = null;
                    userDashboardUrl = '/login';
                }
            });
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing navigation...');
            updateHomeLink();
        });

        // Backup initialization
        window.addEventListener('load', function() {
            console.log('Window loaded, ensuring navigation is set up...');
            updateHomeLink();
        });

        // Mobile menu toggle functionality
        const menuToggle = document.getElementById('menuToggle');
        const navLinks = document.getElementById('navLinks');

        menuToggle.addEventListener('click', function() {
            navLinks.classList.toggle('active');
            
            const spans = menuToggle.querySelectorAll('span');
            spans.forEach((span, index) => {
                if (navLinks.classList.contains('active')) {
                    if (index === 0) span.style.transform = 'rotate(-45deg) translate(-5px, 6px)';
                    if (index === 1) span.style.opacity = '0';
                    if (index === 2) span.style.transform = 'rotate(45deg) translate(-5px, -6px)';
                } else {
                    span.style.transform = '';
                    span.style.opacity = '';
                }
            });
        });

        // Close mobile menu when clicking on a link
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', function() {
                navLinks.classList.remove('active');
                const spans = menuToggle.querySelectorAll('span');
                spans.forEach(span => {
                    span.style.transform = '';
                    span.style.opacity = '';
                });
            });
        });

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
            if (!menuToggle.contains(event.target) && !navLinks.contains(event.target)) {
                navLinks.classList.remove('active');
                const spans = menuToggle.querySelectorAll('span');
                spans.forEach(span => {
                    span.style.transform = '';
                    span.style.opacity = '';
                });
            }
        });

        // Smooth scroll for internal links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add scroll effect to navbar
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar');
            if (window.scrollY > 100) {
                navbar.style.background = 'rgba(255, 255, 255, 0.98)';
                navbar.style.boxShadow = '0 5px 30px rgba(0, 0, 0, 0.15)';
            } else {
                navbar.style.background = 'rgba(255, 255, 255, 0.95)';
                navbar.style.boxShadow = '0 2px 20px rgba(0, 0, 0, 0.1)';
            }
        });
    </script>
</body>
</html>